#!/usr/bin/env bash
# Test hook to debug what environment Claude Code hooks run in

# Use absolute path that works in both Git Bash and WSL
output_file="/mnt/c/Users/mike/.dotfiles/hook-debug.txt"
[[ ! -d "/mnt/c/Users/mike" ]] && output_file="/mnt/c/Users/mike/.dotfiles/hook-debug.txt"

{
    echo "=== Hook Environment Debug ==="
    echo "Timestamp: $(date)"
    echo ""
    echo "=== All Environment Variables ==="
    env | sort
    echo ""
    echo "=== Which Commands ==="
    echo "Which uv: $(which uv 2>/dev/null || echo 'NOT FOUND')"
    echo "Which python: $(which python 2>/dev/null || echo 'NOT FOUND')"
    echo "Which bash: $(which bash 2>/dev/null || echo 'NOT FOUND')"
    echo ""
    echo "Hook ran successfully!"
} > "$output_file"

exit 0
